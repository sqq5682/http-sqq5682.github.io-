---
layout: post
title: 移动端的一些小技巧
categories: [blog ]
tags: [mobile ]
description: 移动端的一些小技巧
---

**移动端长按复制，需要复制的地方变成块状元素 (display:block)**

**app(如微信)中的webview以及安卓原始浏览器会对scroll滚动判断有延迟**

对于顶部的，页面从开始加载的时候就使用position:fixed就不会出现延迟的问题

**移动端字体单位font-size选择px还是rem**

对于只需要适配少部分手机设备，且分辨率对页面影响不大的，使用px即可
对于需要适配各种移动设备，使用rem，例如只需要适配iPhone和iPad等分辨率差别比较挺大的设备
rem配置参考，适合视觉稿宽度为640px的：


	html{font-size:10px}
	@media screen and (min-width:321px) and (max-width:375px){html{font-size:11px}}
	@media screen and (min-width:376px) and (max-width:414px){html{font-size:12px}}
	@media screen and (min-width:415px) and (max-width:639px){html{font-size:15px}}
	@media screen and (min-width:640px) and (max-width:719px){html{font-size:20px}}
	@media screen and (min-width:720px) and (max-width:749px){html{font-size:22.5px}}
	@media screen and (min-width:750px) and (max-width:799px){html{font-size:23.5px}}
	@media screen and (min-width:800px){html{font-size:25px}}

使用px前的代码

	.btn{display:block;width: 250px;height:42px;line-height:42px;border-radius:5px;text-align:center;font-size:18px;background-color:#04BE02;color:#FFFFFF;margin: 50px;}

使用rem后的代码

	.btn{display:block;width: 25rem;height:4.2rem;line-height:4.2rem;border-radius:0.5rem;text-align:center;font-size:1.8rem;background-color:#04BE02;color:#FFFFFF;margin: 5rem;}

**移动端touch事件**

当用户手指放在移动设备在屏幕上滑动会触发的touch事件,以下支持webkit

	- touchstart——当手指触碰屏幕时候发生。不管当前有多少只手指
	- touchmove——当手指在屏幕上滑动时连续触发。通常我们再滑屏页面，会调用event的preventDefault()可以阻止默认情况的发生：阻止页面滚动
	- touchend——当手指离开屏幕时触发
	- touchcancel——系统停止跟踪触摸时候会触发。例如在触摸过程中突然页面alert()一个提示框，此时会触发该事件，这个事件比较少用

TouchEvent

	- touches：屏幕上所有手指的信息
	- targetTouches：手指在目标区域的手指信息
	- changedTouches：最近一次触发该事件的手指信息
	- touchend时，touches与targetTouches信息会被删除，changedTouches保存的最后一次的信息，最好用于计算手指信息

参数信息(changedTouches[0])

	- clientX、clientY在显示区的坐标
	- target：当前元素

参考：https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent

**移动端click屏幕产生200-300 ms的延迟响应**

2007年苹果发布首款iphone上IOS系统搭载的safari为了将适用于PC端上大屏幕的网页能比较好的展示在手机端上，使用了双击缩放(double tap to zoom)的方案，比如你在手机上用浏览器打开一个PC上的网页，你可能在看到页面内容虽然可以撑满整个屏幕，但是字体、图片都很小看不清，此时可以快速双击屏幕上的某一部分，你就能看清该部分放大后的内容，再次双击后能回到原始状态。
双击缩放是指用手指在屏幕上快速点击两次，iOS 自带的 Safari 浏览器会将网页缩放至原始比例。
原因就出在浏览器需要如何判断快速点击上，当用户在屏幕上单击某一个元素时候，例如跳转链接，此处浏览器会先捕获该次单击，但浏览器不能决定用户是单纯要点击链接还是要双击该部分区域进行缩放操作，所以，捕获第一次单击后，浏览器会先Hold一段时间t，如果在t时间区间里用户未进行下一次点击，则浏览器会做单击跳转链接的处理，如果t时间里用户进行了第二次单击操作，则浏览器会禁止跳转，转而进行对该部分区域页面的缩放操作。那么这个时间区间t有多少呢？在IOS safari下，大概为300毫秒。这就是延迟的由来。造成的后果用户纯粹单击页面，页面需要过一段时间才响应，给用户慢体验感觉，对于web开发者来说是，页面js捕获click事件的回调函数处理，需要300ms后才生效，也就间接导致影响其他业务逻辑的处理。

解决方案：

- fastclick可以解决在手机上点击事件的300ms延迟
- zepto的touch模块，tap事件也是为了解决在click的延迟问题

触摸事件的响应顺序

1. ontouchstart
2. ontouchmove
3. ontouchend
4. onclick


解决300ms延迟的问题，也可以通过绑定ontouchstart事件，加快对事件的响应

**ios系统中元素被触摸时产生的半透明灰色遮罩怎么去掉**

ios用户点击一个链接，会出现一个半透明灰色遮罩, 如果想要禁用，可设置-webkit-tap-highlight-color的alpha值为0，也就是属性值的最后一位设置为0就可以去除半透明灰色遮罩

	a,button,input,textarea{-webkit-tap-highlight-color: rgba(0,0,0,0;)}

**部分android系统中元素被点击时产生的边框怎么去掉**

android用户点击一个链接，会出现一个边框或者半透明灰色遮罩, 不同生产商定义出来额效果不一样，可设置-webkit-tap-highlight-color的alpha值为0去除部分机器自带的效果

	a,button,input,textarea{-webkit-tap-highlight-color: rgba(0,0,0,0;)-webkit-user-modify:read-write-plaintext-only; }

-webkit-user-modify有个副作用，就是输入法不再能够输入多个字符,另外，有些机型去除不了，如小米2对于按钮类还有个办法，不使用a或者input标签，直接用div标签.

**webkit表单元素的默认外观怎么重置**

通用做法如下：

	.css{-webkit-appearance:none;}

**伪元素改变number类型input框的默认样式**

	input[type=number]::-webkit-textfield-decoration-container {background-color: transparent;}
	input[type=number]::-webkit-inner-spin-button {-webkit-appearance: none;}
	input[type=number]::-webkit-outer-spin-button {-webkit-appearance: none;}

**webkit表单输入框placeholder的颜色值改变**

	input::-webkit-input-placeholder{color:#AAAAAA;}
	input:focus::-webkit-input-placeholder{color:#EEEEEE;}

**webkit表单输入框placeholder的文字换行**

ios可以，android不行~
在textarea标签下都可以换行~

**禁止ios 长按时不触发系统的菜单，禁止ios&amp;android长按时下载图片**

	.css{-webkit-touch-callout: none}

**禁止ios和android用户选中文字**

	.css{-webkit-user-select:none}

**打电话发短信写邮件的实现**

打电话

	<a href="tel:0755-10086">打电话给:0755-10086</a>

发短信，winphone系统无效

	<a href="sms:10086">发短信给: 10086</a>

写邮件

	<a href="mailto:peun@foxmail.com">peun@foxmail.com</a>

**屏幕旋转的事件和样式**

事件:window.orientation，取值：正负90表示横屏模式、0和180表现为竖屏模式；

	window.orientation，取值：正负90表示横屏模式、0和180表现为竖屏模式；
	window.onorientationchange = function(){
		switch(window.orientation){
			case -90:
			case 90:
			alert("横屏:" + window.orientation);
			case 0:
			case 180:
			alert("竖屏:" + window.orientation);
			break;
		}
	}

**取消input在ios下，输入的时候英文首字母的默认大写**

	<input autocapitalize="off" autocorrect="off" />

**android 上去掉语音输入按钮**

	input::-webkit-input-speech-button {display: none}

**容器百分百布局带有内边距padding**

	.css{box-sizing:border-box;-webkit-box-sizing:border-box;}

**一行或两行文字溢出省略号**

	.one{display:block;overflow: hidden;display:-webkit-box;text-overflow: ellipsis;white-space: nowrap; }
	.two{display:block;overflow: hidden;display:-webkit-box;text-overflow: ellipsis;-webkit-line-clamp: 2;-webkit-box-orient: vertical;max-height:34px;line-height:16px;}

**常用的移动端框架**

#### zepto.js

* 语法与jquery几乎一样，会jquery基本会zepto~
* 最新版本已经更新到1.16
* 官网：http://zeptojs.com/
* 中文(非官网)：http://www.css88.com/doc/zeptojs_api/
* 常使用的扩展模块：
* 浏览器检测：https://github.com/madrobby/zepto/blob/master/src/detect.js
* tap事件：https://github.com/madrobby/zepto/blob/master/src/touch.js
#### iscroll.js
* 解决页面不支持弹性滚动，不支持fixed引起的问题~
* 实现下拉刷新，滑屏，缩放等功能~
* 最新版本已经更新到5.0
* 官网：http://cubiq.org/iscroll-5
* 滑屏框架
* 适合上下滑屏、左右滑屏等滑屏切换页面的效果
#### slip.js
#### iSlider.js
#### fullpage.js
#### swiper.js






