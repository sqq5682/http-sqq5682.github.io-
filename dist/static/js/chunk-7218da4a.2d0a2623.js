(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7218da4a"],{"0a18":function(e,t,o){"use strict";var a=o("369b"),r=o.n(a);r.a},"20ee":function(e,t,o){},"369b":function(e,t,o){},"52b5":function(e,t,o){"use strict";o.d(t,"d",(function(){return u})),o.d(t,"a",(function(){return d})),o.d(t,"c",(function(){return c})),o.d(t,"b",(function(){return g}));var a=o("b775"),r=o("da71"),i=r.classifyListU,s=r.addClassifyU,l=(r.updataClassifyU,r.classifyDetailU),n=r.classifyDelU;function u(e){return Object(a["a"])({url:i,method:"get",params:e})}function d(e){return Object(a["a"])({url:s,method:"post",data:e})}function c(e){return Object(a["a"])({url:l,method:"get",params:e})}function g(e){return Object(a["a"])({url:n,method:"post",data:e})}},"6a43":function(e,t,o){"use strict";var a=o("a5ce"),r=o.n(a);r.a},a5ce:function(e,t,o){},a87a:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",staticClass:"goodsShortInput",attrs:{disabled:e.goodsDisabled,model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[o("el-form-item",{staticClass:"goodsLongInput",attrs:{label:"商品名称",prop:"goodsName",placeholder:"请填写商品名称"}},[o("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.goodsName,callback:function(t){e.$set(e.ruleForm,"goodsName",t)},expression:"ruleForm.goodsName"}})],1),o("el-form-item",{staticClass:"goodsLongInput",attrs:{label:"商品副标题",prop:"goodsName",placeholder:"请填写商品副标题"}},[o("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.goodsSeName,callback:function(t){e.$set(e.ruleForm,"goodsSeName",t)},expression:"ruleForm.goodsSeName"}})],1),o("el-form-item",{attrs:{label:"商品分类",prop:"goodsClassify"}},[o("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.ruleForm.goodsClassify,callback:function(t){e.$set(e.ruleForm,"goodsClassify",t)},expression:"ruleForm.goodsClassify"}},e._l(e.classifyOptions,(function(e){return o("el-option",{key:e.Id,attrs:{label:e.CategoryName,value:e.Id}})})),1)],1),o("el-form-item",{attrs:{label:"成本价",prop:"goodsPrice",placeholder:"请填写商品成本价"}},[o("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.goodsPrice,callback:function(t){e.$set(e.ruleForm,"goodsPrice",t)},expression:"ruleForm.goodsPrice"}}),e._v(" 元 ")],1),o("el-form-item",{attrs:{label:"销售价",prop:"goodsSalePrice",placeholder:"请填写商品销售价"}},[o("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.goodsSalePrice,callback:function(t){e.$set(e.ruleForm,"goodsSalePrice",t)},expression:"ruleForm.goodsSalePrice"}}),e._v(" 元 ")],1),o("el-form-item",{attrs:{label:"库存",prop:"goodsStock",placeholder:"请填写商品库存"}},[o("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.goodsStock,callback:function(t){e.$set(e.ruleForm,"goodsStock",t)},expression:"ruleForm.goodsStock"}})],1),o("el-form-item",{attrs:{label:"上架状态",prop:"goodsSaleStatus",placeholder:"请填写商品状态"}},[o("el-select",{attrs:{placeholder:"请填写商品状态"},model:{value:e.ruleForm.goodsSaleStatus,callback:function(t){e.$set(e.ruleForm,"goodsSaleStatus",t)},expression:"ruleForm.goodsSaleStatus"}},e._l(e.goodsSaleStatusOptions,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{label:"商品主图",prop:"goodsMainImg",placeholder:"请上传商品主图"}},[o("uploadImg",{attrs:{imageList:e.goodsMainImg},on:{getUploadImg:e.getUploadMainImg}})],1),o("el-form-item",{attrs:{label:"商品展示图",prop:"goodsShowImg",placeholder:"请上传商品展示图"}},[o("uploadImg",{attrs:{imageList:e.goodsShowImg,imgLimtCount:5,isMultiple:!0},on:{getUploadImg:e.getUploadShowImg}})],1),o("el-form-item",{attrs:{label:"内容",prop:"goodsContent",placeholder:"请填写内容"}},[o("quill-editor",{attrs:{contentDefault:e.ruleForm.goodsContent},on:{quillEditorText:e.editorContent}})],1),o("el-form-item",[o("span",{staticClass:"elBack",on:{click:e.backPre}},[e._v("返回")]),e.goodsDisabled?e._e():o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)},r=[],i=(o("7db0"),o("a15b"),o("5530")),s=(o("96cf"),o("1da1")),l=o("c40e"),n=o("52b5"),u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-upload",{attrs:{action:e.baseUrl,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"file-list":e.imageList,multiple:e.isMultiple,name:"files",limit:e.imgLimtCount,"show-file-list":e.showFileList,accept:e.acceptImage,"on-success":e.imgUploadSuccess,"on-remove":e.imgRemove}},[o("i",{staticClass:"el-icon-plus"})]),o("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},d=[],c=(o("99af"),o("a434"),o("a9e3"),o("01ea")),g={data:function(){return{dialogVisible:!1,dialogImageUrl:"",acceptImage:"image/jpg,image/jpeg,image/gif,image/png,image/bmp",baseUrl:"".concat(c["a"],"/api/Business/UploadImg")}},props:{imgLimtCount:{type:Number,default:1},isMultiple:{type:Boolean,default:!1},showFileList:{type:Boolean,default:!0},imageList:{type:Array,default:function(){return[]}}},methods:{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},imgUploadSuccess:function(e,t){this.$emit("getUploadImg","".concat(c["a"]).concat(e[0]))},imgRemove:function(){this.imageList.splice(0,1)}}},m=g,p=o("2877"),f=Object(p["a"])(m,u,d,!1,null,"df87d6c2",null),h=f.exports,b=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"edit_container",staticStyle:{width:"100%",height:"100%"}},[o("quill-editor",{ref:"myQuillEditor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.contentDefault,callback:function(t){e.contentDefault=t},expression:"contentDefault"}}),o("uploadImg",{ref:"uploadFileImage",staticStyle:{display:"none",width:"0",height:"0",cursor:"pointer"},attrs:{id:e.idImage,showFileList:!1},on:{getUploadImg:e.getUploadImg}})],1)},S=[],v=o("953d"),I=(o("a753"),o("8096"),o("14e1"),{data:function(){var e=this;return{idImage:"uploadImgWrap",editorOption:{placeholder:"请输入文本",theme:"snow",acceptImage:"image/jpg,image/jpeg,image/gif,image/png,image/bmp",goodsShowImg:"",modules:{toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["link"],["image"]],handlers:{image:function(t){document.querySelector("#".concat(e.idImage," input")).click()}}}}}}},props:{contentDefault:String},components:{quillEditor:v["quillEditor"],uploadImg:h},methods:{onEditorBlur:function(e){console.log(e)},onEditorChange:function(e){this.$emit("quillEditorText",e.html)},getUploadImg:function(e){var t=this.$refs.myQuillEditor.quill,o=t.getSelection().index;t.insertEmbed(o,"image",e),t.setSelection(o+1)}}}),y=I,w=(o("cfed"),Object(p["a"])(y,b,S,!1,null,null,null)),F=w.exports,k=o("ac0d"),C={mixins:[k["a"]],data:function(){return{loading:!1,showFileStatus:!1,goodsMainImg:[],goodsShowImg:[],ruleForm:{goodsName:"",goodsSeName:"",goodsClassify:"",goodsMainImg:[],goodsShowImg:[],goodsContent:"",goodsStock:100,goodsSaleStatus:1},rules:{goodsName:[{required:!0,message:"请填写商品标题",trigger:"blur"}],goodsSeName:[{required:!0,message:"请填写商品副标题",trigger:"blur"}],goodsClassify:[{required:!0,message:"请选择分类",trigger:"blur"}],goodsMainImg:[{required:!0,message:"请上传主图",trigger:"change"}],goodsShowImg:[{required:!0,message:"请上传展示图",trigger:"change"}],goodsSalePrice:[{required:!0,message:"请填写商品成本价",trigger:"blur"}],goodsPrice:[{required:!0,message:"请填写商品销售价",trigger:"blur"}],goodsStock:[{required:!0,message:"请填写商品库存",trigger:"blur"}],goodsContent:[{required:!1,message:"请填写商品内容",trigger:"blur"}],goodsSaleStatus:[{required:!0,message:"请选择商品状态",trigger:"change"}]},classifyOptions:[{value:"0",label:"黄金糕"},{value:"1",label:"双皮奶"}],goodsLimitOptions:[{value:"1",label:"限购"},{value:"0",label:"不限购"}],goodsSaleStatusOptions:[{value:1,label:"在售"},{value:2,label:"下架"}]}},components:{uploadImg:h,quillEditor:F},created:function(){this.fetchListData(),"edit"!=this.$route.query.goodsManage&&"detail"!=this.$route.query.goodsManage||this.getGoodsDetail()},computed:{goodsDisabled:function(){return"detail"==this.$route.query.goodsManage}},methods:{onSubmit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,console.log(e.ruleForm),e.handleAdd(),e.loading=!1}))},editorContent:function(e){this.ruleForm.goodsContent=e},addEditOk:function(){this.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3})},fetchListData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var o,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["d"])({pageIndex:1,pageSize:100});case 2:o=t.sent,a=o.data,r=a.data,a.total,o.code||(e.classifyOptions=r);case 5:case"end":return t.stop()}}),t)})))()},getUploadMainImg:function(e){this.ruleForm.goodsMainImg.push(e)},getUploadShowImg:function(e){this.ruleForm.goodsShowImg.push(e)},getGoodsDetail:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var o,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={id:e.$route.query.goodsId},t.next=3,Object(l["c"])(Object(i["a"])({},o));case 3:a=t.sent,a.code||(r=a.data.data,console.log(r),e.ruleForm.goodsContent=r.Detail,e.ruleForm.goodsPrice=r.Price,e.ruleForm.goodsSalePrice=r.Price,e.ruleForm.goodsSaleStatus=r.Status,e.ruleForm.goodsSeName=r.Subtitle,e.ruleForm.goodsName=r.ProductName,e.ruleForm.stock=r.ProductName,e.ruleForm.goodsClassify=r.CategoryId,e.goodsMainImg.push({url:r.MainImage}),e.goodsShowImg.push({url:r.SubImages}),e.showFileStatus=!0);case 5:case"end":return t.stop()}}),t)})))()},handleAdd:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var o,a,r,s,n,u,d,c,g,m,p,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.ruleForm,a=o.goodsContent,r=o.goodsMainImg,s=o.goodsName,n=o.goodsPrice,o.goodsSalePrice,u=o.goodsSaleStatus,d=o.goodsSeName,c=o.goodsShowImg,g=o.goodsStock,m=o.goodsClassify,p={productName:s,categoryId:m,CategoryName:e.classifyOptions.find((function(e){return e.Id==m})).CategoryName,subtitle:d,mainImage:r.join(""),subImages:c.join(""),detail:a,price:n,stock:g,status:u},t.next=4,Object(l["a"])(Object(i["a"])({},p));case 4:f=t.sent,f.code||(e.addEditOk(),e.onCancel());case 6:case"end":return t.stop()}}),t)})))()},handleUpdata:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["e"])({id:e.$route.query.id});case 2:t.sent;case 3:case"end":return t.stop()}}),t)})))()}}},O=C,x=(o("6a43"),o("0a18"),Object(p["a"])(O,a,r,!1,null,"34d74dfd",null));t["default"]=x.exports},ac0d:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var a={methods:{backPre:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.back()}}}},c40e:function(e,t,o){"use strict";o.d(t,"d",(function(){return d})),o.d(t,"c",(function(){return c})),o.d(t,"e",(function(){return g})),o.d(t,"b",(function(){return m})),o.d(t,"a",(function(){return p}));var a=o("b775"),r=o("da71"),i=r.goodsListU,s=r.goodsDetailU,l=r.updataGoodsU,n=r.addGoodsU,u=r.delGoodsU;function d(e){return Object(a["a"])({url:i,method:"get",params:e})}function c(e){return Object(a["a"])({url:s,method:"get",params:e})}function g(e){return Object(a["a"])({url:l,method:"post",data:e})}function m(e){return Object(a["a"])({url:u,method:"post",data:e})}function p(e){return Object(a["a"])({url:n,method:"post",data:e})}},cfed:function(e,t,o){"use strict";var a=o("20ee"),r=o.n(a);r.a}}]);