(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5796e481"],{"11b8":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container",attrs:{loading:t.loading}},[a("div",{staticClass:"ruleForm longInput"},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",disabled:t.formDisabled,"label-position":"top"}},[a("el-form-item",{attrs:{label:"上级分类",prop:"brandId"}},[a("el-select",{attrs:{placeholder:t.dname},model:{value:t.ruleForm.brandId,callback:function(e){t.$set(t.ruleForm,"brandId",e)},expression:"ruleForm.brandId"}},t._l(t.brandList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("el-form-item",{attrs:{label:"分类中文名称",prop:"name"}},[a("el-input",{model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),a("el-form-item",[a("span",{staticClass:"elBack",attrs:{size:"small"},on:{click:t.onCancel}},[t._v("返回")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)])},r=[],i=(a("4160"),a("b0c0"),a("b64b"),a("159b"),a("5530")),o=a("9add"),s={name:"Addbrand",data:function(){return{brandList:[],loading:!1,ruleForm:{name:"",brandId:0},rules:{name:[{required:!0,message:"请输入中文",trigger:"blur"},{min:1,max:20,message:"请输入长度在 1 到 20 个汉字",trigger:"blur"}],number:[{required:!0,message:"请输入数字",trigger:"blur"},{pattern:/^[1-9][0-9]*$/,message:"请输入数字",trigger:"blur"}]},dname:""}},computed:{formDisabled:function(){return"detail"==this.$route.query.type}},created:function(){this.fetchListData()},mounted:function(){"edit"!=this.$route.query.type&&"detail"!=this.$route.query.type||this.fetchDetailData()},methods:{preserve:function(){var t=this,e=this.$refs.ruleForm;e.validate((function(e){if(!e)return!1;t.cleardialog(!0)}))},onSubmit:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.formDisabled?t.fetchUpdataData():t.fetchSaveData(),t.loading=!1,t.$store.dispatch("tagsView/delView",t.$route),t.$router.back()}))},notifySuccess:function(){this.$notify({title:"成功",message:"提交成功",type:"success",duration:1e3}),this.loading=!1},onCancel:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.back()},fetchDetailData:function(){var t=this;this.loading=!0,Object(o["b"])({id:this.$route.query.goodsId}).then((function(e){console.log(e),t.ruleForm.brandId=56,t.ruleForm.name=e.data.name,t.loading=!1}))},fetchListData:function(){var t=this;this.loading=!0,Object(o["c"])(Object(i["a"])({},this.condition)).then((function(e){t.brandList=e.data.items[0].classifyList,t.brandList.unshift({id:0,name:"顶级"}),t.total=e.data.total,t.loading=!1}))},fetchSaveData:function(){var t=this;this.loading=!0,Object(o["a"])({name:"",id:""}).then((function(e){t.notifySuccess()}))},fetchUpdataData:function(){var t=this;this.loading=!0,Object(o["d"])({name:"",id:""}).then((function(e){t.notifySuccess()}))},countermand:function(){this.$emit("resetDialog")},resetdialog:function(){var t=this,e=this.$refs.ruleForm;Object.keys(this.ruleForm).forEach((function(e){t.ruleForm[e]=""})),e.resetFields()}}},u=s,l=(a("1d17"),a("2877")),d=Object(l["a"])(u,n,r,!1,null,"3df755ac",null);e["default"]=d.exports},"1d17":function(t,e,a){"use strict";var n=a("908a"),r=a.n(n);r.a},"908a":function(t,e,a){},"9add":function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return d})),a.d(e,"d",(function(){return c})),a.d(e,"b",(function(){return m}));var n=a("b775"),r=a("da71"),i=r.brandListU,o=r.addBrandU,s=r.updataBrandU,u=r.brandDetailU;function l(t){return Object(n["a"])({url:i,method:"get",params:t})}function d(t){return Object(n["a"])({url:o,method:"post",params:t})}function c(t){return Object(n["a"])({url:s,method:"post",params:t})}function m(t){return Object(n["a"])({url:u,method:"get",params:t})}}}]);