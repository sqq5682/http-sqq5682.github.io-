(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c1e8eb7"],{1662:function(t,e,a){},5121:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container",attrs:{loading:t.loading}},[a("div",{staticClass:"ruleForm longInput"},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",disabled:t.formDisabled,"label-position":"top"}},[a("el-form-item",{attrs:{label:"上级分类",prop:"classifyId"}},[a("el-select",{attrs:{placeholder:t.dname},model:{value:t.ruleForm.classifyId,callback:function(e){t.$set(t.ruleForm,"classifyId",e)},expression:"ruleForm.classifyId"}},t._l(t.classifyList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("el-form-item",{attrs:{label:"分类中文名称",prop:"name"}},[a("el-input",{model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),a("el-form-item",[a("span",{staticClass:"elBack",attrs:{size:"small"},on:{click:t.onCancel}},[t._v("返回")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)])},s=[],n=(a("4160"),a("b0c0"),a("b64b"),a("159b"),a("5530")),r=a("52b5"),o={name:"AddClassify",data:function(){return{classifyList:[],loading:!1,ruleForm:{name:"",classifyId:0},rules:{name:[{required:!0,message:"请输入中文",trigger:"blur"},{min:1,max:20,message:"请输入长度在 1 到 20 个汉字",trigger:"blur"}],number:[{required:!0,message:"请输入数字",trigger:"blur"},{pattern:/^[1-9][0-9]*$/,message:"请输入数字",trigger:"blur"}]},dname:""}},computed:{formDisabled:function(){return"detail"==this.$route.query.type}},created:function(){this.fetchListData()},mounted:function(){"edit"!=this.$route.query.type&&"detail"!=this.$route.query.type||this.fetchDetailData()},methods:{preserve:function(){var t=this,e=this.$refs.ruleForm;e.validate((function(e){if(!e)return!1;t.cleardialog(!0)}))},onSubmit:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.formDisabled?t.fetchUpdataData():t.fetchSaveData(),t.loading=!1,t.$store.dispatch("tagsView/delView",t.$route),t.$router.back()}))},notifySuccess:function(){this.$notify({title:"成功",message:"提交成功",type:"success",duration:1e3}),this.loading=!1},onCancel:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.back()},fetchDetailData:function(){var t=this;this.loading=!0,Object(r["b"])({id:this.$route.query.goodsId}).then((function(e){console.log(e),t.ruleForm.classifyId=56,t.ruleForm.name=e.data.name,t.loading=!1}))},fetchListData:function(){var t=this;this.loading=!0,Object(r["c"])(Object(n["a"])({},this.condition)).then((function(e){t.classifyList=e.data.items[0].classifyList,t.classifyList.unshift({id:0,name:"顶级"}),t.total=e.data.total,t.loading=!1}))},fetchSaveData:function(){var t=this;this.loading=!0,Object(r["a"])({name:"",id:""}).then((function(e){t.notifySuccess()}))},fetchUpdataData:function(){var t=this;this.loading=!0,Object(r["d"])({name:"",id:""}).then((function(e){t.notifySuccess()}))},countermand:function(){this.$emit("resetDialog")},resetdialog:function(){var t=this,e=this.$refs.ruleForm;Object.keys(this.ruleForm).forEach((function(e){t.ruleForm[e]=""})),e.resetFields()}}},l=o,u=(a("9b57"),a("2877")),c=Object(u["a"])(l,i,s,!1,null,"5dc3459f",null);e["default"]=c.exports},"52b5":function(t,e,a){"use strict";a.d(e,"c",(function(){return u})),a.d(e,"a",(function(){return c})),a.d(e,"d",(function(){return d})),a.d(e,"b",(function(){return f}));var i=a("b775"),s=a("da71"),n=s.classifyListU,r=s.addClassifyU,o=s.updataClassifyU,l=s.classifyDetailU;function u(t){return Object(i["a"])({url:n,method:"get",params:t})}function c(t){return Object(i["a"])({url:r,method:"post",params:t})}function d(t){return Object(i["a"])({url:o,method:"post",params:t})}function f(t){return Object(i["a"])({url:l,method:"get",params:t})}},"9b57":function(t,e,a){"use strict";var i=a("1662"),s=a.n(i);s.a}}]);